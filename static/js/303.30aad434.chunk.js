"use strict";(self.webpackChunkbdk_new=self.webpackChunkbdk_new||[]).push([[303],{303(e,t,a){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=l(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function n(e,t,a){return(t=s(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){n(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}a.d(t,{A:()=>P});var i=a(43),o=a(216);const u={200:{40:{8:3200},50:{10:4100}},240:{50:{10:4800},60:{10:5400}},300:{60:{12:7200},80:{12:9100}}},h=[{H:200,tf:40,tw:8,price:3200},{H:200,tf:50,tw:10,price:4100},{H:240,tf:50,tw:10,price:4800},{H:240,tf:60,tw:10,price:5400},{H:300,tf:60,tw:12,price:7200},{H:300,tf:80,tw:12,price:9100}],d={pine:1,larch:1.4,cedar:1.6},m=[{min:100,rate:.12},{min:50,rate:.08},{min:10,rate:.05},{min:1,rate:0}],p={local:{base:3e3,km:0},regional:{base:8e3,km:0},interregional:{base:15e3,km:50}},b=1,x=1.3;function v(e){var t;const{length:a=6,height:l=200,flangeThickness:s=50,webThickness:n=10,wood:c="pine",quantity:r=1,antiseptic:i=!1,fireProtection:o=!1,millingGrooves:v=!1,millingHoles:g=!1,holesCount:j=4,deliveryRegion:f="local",deliveryUrgent:_=!1,deliveryDistance:y=0}=e,N=Math.max(1,Math.min(12,parseFloat(a)||6)),k=Math.max(1,parseInt(r,10)||1),w=null!==(t=d[c])&&void 0!==t?t:1,C=1+(i?.15:0)+(o?.25:0),M=function(e,t,a){const l=u[e];if(l){const e=l[t];if(e){const t=e[a];if(null!=t)return t}}const s=e||200,n=t||50,c=a||10;let r=h[0],i=1/0;for(const o of h){const e=Math.abs(o.H-s)+Math.abs(o.tf-n)+Math.abs(o.tw-c);e<i&&(i=e,r=o)}return r.price}(l,s,n),O=M*N*w*C,P=(v?800*N:0)+(g?500*(j||4):0),T=(O+P)*k,S=function(e){const t=Math.max(0,parseInt(e,10)||0);for(const{min:a,rate:l}of m)if(t>=a)return l;return 0}(k),H=T*S,R=T-H,A=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=p[e]||p.local,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?x:b,s=(a.base+(a.km||0)*Math.max(0,t))*l;return Math.round(s)}(f,_,"interregional"===f?y:0),z=Math.round(R+A),D=k>0?Math.round((R+A)/k):0;return{materialCost:Math.round(O*k),millingCost:Math.round(P*k),discountRate:S,discountAmount:Math.round(H),beamsTotal:Math.round(R),deliveryCost:A,total:z,pricePerBeam:D,breakdown:{length:N,quantity:k,pricePerMeter:M,woodCoeff:w,treatmentCoeff:C}}}const g={pine:"\u0421\u043e\u0441\u043d\u0430",larch:"\u041b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430",cedar:"\u041a\u0435\u0434\u0440"},j={local:"\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430\u044f (\u0434\u043e 50 \u043a\u043c)",regional:"\u0420\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f (50\u2013300 \u043a\u043c)",interregional:"\u041c\u0435\u0436\u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f (300+ \u043a\u043c)"};var f=a(579);const _=e=>{let{length:t=6,height:a=200,flangeThickness:l=50,webThickness:s=10}=e;const n=Math.max(1,Math.min(12,parseFloat(t)||6)),c=Math.max(150,Math.min(400,parseInt(a,10)||200)),r=Math.max(30,Math.min(100,parseInt(l,10)||50)),i=Math.max(6,Math.min(16,parseInt(s,10)||10)),o=n/12*100,u=Math.min(80,c/400*80),h=Math.max(4,r/100*12),d=Math.max(2,i/16*8);return(0,f.jsxs)("div",{className:"beam-viz","aria-hidden":"true",children:[(0,f.jsxs)("div",{className:"beam-viz__label",children:["\u0411\u0414\u041a ",n,"\u043c \xd7 ",c,"\xd7",r,"\xd7",i]}),(0,f.jsx)("div",{className:"beam-viz__container",children:(0,f.jsxs)("svg",{viewBox:"0 0 200 100",className:"beam-viz__svg",preserveAspectRatio:"xMidYMid meet",children:[(0,f.jsxs)("g",{transform:"translate(20, 50)",children:[(0,f.jsx)("rect",{x:0,y:-u/2-h,width:o,height:h,className:"beam-viz__flange",rx:"1"}),(0,f.jsx)("rect",{x:o/2-d/2,y:-u/2,width:d,height:u,className:"beam-viz__web",rx:"1"}),(0,f.jsx)("rect",{x:0,y:u/2,width:o,height:h,className:"beam-viz__flange",rx:"1"})]}),(0,f.jsxs)("g",{transform:"translate(140, 50)",children:[(0,f.jsx)("rect",{x:-d/2-4,y:-u/2-h-4,width:2*h+d+8,height:h,className:"beam-viz__flange",rx:"1"}),(0,f.jsx)("rect",{x:-d/2,y:-u/2,width:d,height:u,className:"beam-viz__web",rx:"1"}),(0,f.jsx)("rect",{x:-d/2-4,y:u/2+4,width:2*h+d+8,height:h,className:"beam-viz__flange",rx:"1"})]})]})})]})};var y=a(329);const N=[200,240,300].map(e=>({value:e,label:"".concat(e," \u043c\u043c")})),k=[40,50,60,80].map(e=>({value:e,label:"".concat(e," \u043c\u043c")})),w=[8,10,12].map(e=>({value:e,label:"".concat(e," \u043c\u043c")})),C=Object.entries(g).map(e=>{let[t,a]=e;return{value:t,label:a}}),M=Object.entries(j).map(e=>{let[t,a]=e;return{value:t,label:a}}),O=[{id:"main",label:"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"},{id:"options",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"},{id:"delivery",label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}],P=()=>{const e=(0,o.Zp)(),[t,a]=(0,i.useState)(1),[l,s]=(0,i.useState)({length:6,height:200,flangeThickness:50,webThickness:10,wood:"pine",quantity:1,antiseptic:!1,fireProtection:!1,millingGrooves:!1,millingHoles:!1,holesCount:4,deliveryRegion:"local",deliveryUrgent:!1,deliveryDistance:100}),n=(0,i.useCallback)((e,t)=>{s(a=>r(r({},a),{},{[e]:t}))},[]),c=(0,i.useMemo)(()=>v(l),[l]),u=e=>e.toLocaleString("ru-RU")+" \u20bd";return(0,f.jsx)("section",{className:"calculator",id:"calculator",children:(0,f.jsxs)("div",{className:"container",children:[(0,f.jsx)("h2",{className:"calculator__title",children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438 \u0411\u0414\u041a-\u0431\u0430\u043b\u043e\u043a"}),(0,f.jsx)("p",{className:"calculator__subtitle",children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0430\u0433\u043e\u0432"}),(0,f.jsxs)("div",{className:"calculator__layout",children:[(0,f.jsxs)("div",{className:"calculator__form-wrap",children:[(0,f.jsx)("ul",{className:"calculator__steps",role:"tablist",children:O.map((e,l)=>(0,f.jsx)("li",{className:"calculator__step ".concat(t>=l+1?"calculator__step--active":""," ").concat(t===l+1?"calculator__step--current":""),role:"tab","aria-selected":t===l+1,children:(0,f.jsxs)("button",{type:"button",onClick:()=>a(l+1),children:[(0,f.jsx)("span",{className:"calculator__step-num",children:l+1}),e.label]})},e.id))}),(0,f.jsxs)("div",{className:"calculator__form",children:[1===t&&(0,f.jsxs)("div",{className:"calculator__step-content",children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"\u0414\u043b\u0438\u043d\u0430 \u0431\u0430\u043b\u043a\u0438 (\u043c)"}),(0,f.jsx)("input",{type:"number",min:1,max:12,step:.5,value:l.length,onChange:e=>n("length",e.target.value)})]}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsx)(y.A,{label:"\u0412\u044b\u0441\u043e\u0442\u0430 \u0441\u0435\u0447\u0435\u043d\u0438\u044f (\u043c\u043c)",value:l.height,options:N,onChange:e=>n("height",e)})}),(0,f.jsxs)("div",{className:"form-row",children:[(0,f.jsx)("div",{className:"form-group",children:(0,f.jsx)(y.A,{label:"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u043f\u043e\u043b\u043a\u0438 (\u043c\u043c)",value:l.flangeThickness,options:k,onChange:e=>n("flangeThickness",e)})}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsx)(y.A,{label:"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0441\u0442\u0435\u043d\u043a\u0438 (\u043c\u043c)",value:l.webThickness,options:w,onChange:e=>n("webThickness",e)})})]}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsx)(y.A,{label:"\u041f\u043e\u0440\u043e\u0434\u0430 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b",value:l.wood,options:C,onChange:e=>n("wood",e)})}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e (\u0448\u0442)"}),(0,f.jsx)("input",{type:"number",min:1,value:l.quantity,onChange:e=>n("quantity",e.target.value)})]})]}),2===t&&(0,f.jsxs)("div",{className:"calculator__step-content",children:[(0,f.jsx)("div",{className:"form-group",children:(0,f.jsxs)("label",{className:"checkbox-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:l.antiseptic,onChange:e=>n("antiseptic",e.target.checked)}),(0,f.jsx)("span",{children:"\u0410\u043d\u0442\u0438\u0441\u0435\u043f\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 (+15%)"})]})}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsxs)("label",{className:"checkbox-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:l.fireProtection,onChange:e=>n("fireProtection",e.target.checked)}),(0,f.jsx)("span",{children:"\u041e\u0433\u043d\u0435\u0437\u0430\u0449\u0438\u0442\u0430 (+25%)"})]})}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsxs)("label",{className:"checkbox-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:l.millingGrooves,onChange:e=>n("millingGrooves",e.target.checked)}),(0,f.jsx)("span",{children:"\u0424\u0440\u0435\u0437\u0435\u0440\u043e\u0432\u043a\u0430 \u043f\u0430\u0437\u043e\u0432 (800 \u20bd/\u043c)"})]})}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsxs)("label",{className:"checkbox-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:l.millingHoles,onChange:e=>n("millingHoles",e.target.checked)}),(0,f.jsx)("span",{children:"\u0424\u0440\u0435\u0437\u0435\u0440\u043e\u0432\u043a\u0430 \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u0439"})]}),l.millingHoles&&(0,f.jsx)("input",{type:"number",min:1,max:20,value:l.holesCount,onChange:e=>n("holesCount",parseInt(e.target.value,10)||4),className:"calculator__holes-input",placeholder:"\u041a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u0439 \u043d\u0430 \u0431\u0430\u043b\u043a\u0443"})]})]}),3===t&&(0,f.jsxs)("div",{className:"calculator__step-content",children:[(0,f.jsx)("div",{className:"form-group",children:(0,f.jsx)(y.A,{label:"\u0420\u0435\u0433\u0438\u043e\u043d \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",value:l.deliveryRegion,options:M,onChange:e=>n("deliveryRegion",e)})}),"interregional"===l.deliveryRegion&&(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 (\u043a\u043c)"}),(0,f.jsx)("input",{type:"number",min:300,value:l.deliveryDistance,onChange:e=>n("deliveryDistance",parseInt(e.target.value,10)||300)})]}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsxs)("label",{className:"checkbox-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:l.deliveryUrgent,onChange:e=>n("deliveryUrgent",e.target.checked)}),(0,f.jsx)("span",{children:"\u0421\u0440\u043e\u0447\u043d\u0430\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430"})]})})]}),(0,f.jsxs)("div",{className:"calculator__nav",children:[t>1?(0,f.jsx)("button",{type:"button",className:"btn-outline",onClick:()=>a(t-1),children:"\u041d\u0430\u0437\u0430\u0434"}):(0,f.jsx)("span",{}),t<3?(0,f.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>a(t+1),children:"\u0414\u0430\u043b\u0435\u0435"}):(0,f.jsx)("span",{})]})]})]}),(0,f.jsxs)("aside",{className:"calculator__aside",children:[(0,f.jsx)(_,{length:l.length,height:l.height,flangeThickness:l.flangeThickness,webThickness:l.webThickness}),(0,f.jsxs)("div",{className:"calculator__result",children:[(0,f.jsxs)("div",{className:"calculator__result-total",children:[(0,f.jsx)("span",{className:"calculator__result-label",children:"\u0418\u0442\u043e\u0433\u043e"}),(0,f.jsx)("span",{className:"calculator__result-value",children:u(c.total)})]}),(0,f.jsxs)("div",{className:"calculator__result-details",children:[(0,f.jsxs)("p",{children:["\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b: ",u(c.materialCost)]}),c.millingCost>0&&(0,f.jsxs)("p",{children:["\u0424\u0440\u0435\u0437\u0435\u0440\u043e\u0432\u043a\u0430: ",u(c.millingCost)]}),c.discountAmount>0&&(0,f.jsxs)("p",{children:["\u0421\u043a\u0438\u0434\u043a\u0430: \u2212",u(c.discountAmount)]}),(0,f.jsxs)("p",{children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",u(c.deliveryCost)]})]}),(0,f.jsxs)("p",{className:"calculator__result-per",children:["\u0437\u0430 \u0448\u0442: ",u(c.pricePerBeam)]}),(0,f.jsx)("button",{type:"button",className:"btn-primary calculator__cta",onClick:()=>{const t=["\u0411\u0414\u041a ".concat(l.length,"\u043c \xd7 ").concat(l.height,"\xd7").concat(l.flangeThickness,"\xd7").concat(l.webThickness),"\u041f\u043e\u0440\u043e\u0434\u0430: ".concat(g[l.wood]),"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ".concat(l.quantity," \u0448\u0442"),l.antiseptic&&"\u0410\u043d\u0442\u0438\u0441\u0435\u043f\u0442\u0438\u043a",l.fireProtection&&"\u041e\u0433\u043d\u0435\u0437\u0430\u0449\u0438\u0442\u0430",l.millingGrooves&&"\u0424\u0440\u0435\u0437\u0435\u0440\u043e\u0432\u043a\u0430 \u043f\u0430\u0437\u043e\u0432",l.millingHoles&&"\u0424\u0440\u0435\u0437\u0435\u0440\u043e\u0432\u043a\u0430 \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u0439 (".concat(l.holesCount," \u0448\u0442)"),"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ".concat(j[l.deliveryRegion]).concat(l.deliveryUrgent?", \u0441\u0440\u043e\u0447\u043d\u0430\u044f":""),"\u0418\u0442\u043e\u0433\u043e: ".concat(c.total.toLocaleString("ru-RU")," \u20bd")].filter(Boolean).join("\n"),a=encodeURIComponent(t);e("/request?from=calculator&summary=".concat(a))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u0447\u0451\u0442 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"})]})]})]})]})})}},329(e,t,a){a.d(t,{A:()=>n});var l=a(43),s=a(579);const n=e=>{var t,a,n,c;let{value:r,options:i,onChange:o,label:u,id:h,className:d="",placeholder:m}=e;const[p,b]=(0,l.useState)(!1),x=(0,l.useRef)(null);(0,l.useEffect)(()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&b(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const v=""!==r&&null!=r?null!==(t=null===(a=i.find(e=>e.value===r))||void 0===a?void 0:a.label)&&void 0!==t?t:"":null!==(n=null!==m&&void 0!==m?m:null===(c=i[0])||void 0===c?void 0:c.label)&&void 0!==n?n:"";return(0,s.jsxs)("div",{className:"custom-select ".concat(d),children:[u&&(0,s.jsx)("label",{className:"custom-select__label",children:u}),(0,s.jsxs)("div",{className:"custom-select__wrap",ref:x,children:[(0,s.jsxs)("button",{type:"button",className:"custom-select__trigger ".concat(p?"custom-select__trigger--open":""),onClick:e=>{e.stopPropagation(),b(e=>!e)},"aria-expanded":p,"aria-haspopup":"listbox",id:h,children:[(0,s.jsx)("span",{className:"custom-select__value",children:v}),(0,s.jsx)("svg",{className:"custom-select__chevron",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M6 9l6 6 6-6"})})]}),(0,s.jsx)("ul",{className:"custom-select__list",role:"listbox",hidden:!p,style:{display:p?"block":"none"},children:i.map(e=>(0,s.jsx)("li",{role:"option","aria-selected":r===e.value,className:"custom-select__option ".concat(r===e.value?"custom-select__option--active":""),onClick:()=>{o(e.value),b(!1)},children:e.label},e.value))})]})]})}}}]);
//# sourceMappingURL=303.30aad434.chunk.js.map